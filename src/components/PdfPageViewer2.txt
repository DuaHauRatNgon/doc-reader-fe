import { Document, Page, pdfjs } from 'react-pdf';
import { useState } from 'react';
import 'react-pdfdistesmPageAnnotationLayer.css';
import 'react-pdfdistesmPageTextLayer.css';

 CHỈ cấu hình worker ở đây, không import file worker
pdfjs.GlobalWorkerOptions.workerSrc = 'httpscdnjs.cloudflare.comajaxlibspdf.js3.11.174pdf.worker.min.js';

export default function PdfPageViewer({ base64 }) {
  const [numPages, setNumPages] = useState(null);
  const [pageNumber, setPageNumber] = useState(1);
  
  const onLoadSuccess = ({ numPages }) = {
    setNumPages(numPages);
  };
  
  const onLoadError = (error) = {
    console.error('Error loading PDF', error);
  };
  
  return (
    div style={{ border '1px solid #ccc', marginBottom '1rem' }}
      style{`
        .react-pdf__Page__textContent {
          position absolute !important;
          top 0 !important;
          left 0 !important;
          transform none !important;
          pointer-events none !important;
          opacity 0 !important;
        }
        
        .react-pdf__Page {
          position relative !important;
        }
        
         Nếu muốn có thể select text, đổi opacity thành 0.01 và pointer-events thành auto 
      `}style
      Document
        file={`dataapplicationpdf;base64,${base64}`}
        onLoadSuccess={onLoadSuccess}
        onLoadError={onLoadError}
        loading={divĐang tải PDF...div}
        error={divLỗi khi tải PDFdiv}
      
        Page 
          pageNumber={pageNumber} 
          loading={divĐang tải trang...div}
          renderTextLayer={false}
          renderAnnotationLayer={false}
        
      Document
      
      {numPages && (
        div style={{ textAlign 'center', marginTop '10px' }}
          button 
            disabled={pageNumber = 1}
            onClick={() = setPageNumber(pageNumber - 1)}
          
            Trang trước
          button
          span style={{ margin '0 10px' }}
            Trang {pageNumber}  {numPages}
          span
          button 
            disabled={pageNumber = numPages}
            onClick={() = setPageNumber(pageNumber + 1)}
          
            Trang sau
          button
        div
      )}
    div
  );
}